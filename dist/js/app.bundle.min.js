function Config(e,o,t){e.state("employees",{url:"/employees","abstract":!0,templateUrl:function(){return ionic.Platform.isAndroid()?"views/employees/tabs-android.html":"views/employees/tabs-ios.html"}}).state("employees.jobsFeed",{url:"/jobs-feed",views:{"jobs-feed-tab":{controller:"JobsFeedController",templateUrl:"views/employees/jobs-feed.html"}}}).state("employees.job",{url:"/job/:jobId",views:{"jobs-feed-tab":{controller:"JobController",templateUrl:"views/employees/job.html"}}}).state("employees.jobsUser",{url:"/jobs-user",views:{"jobs-user-tab":{controller:"JobsUserController",templateUrl:"views/employees/jobs-user.html"}}}).state("employees.jobsSearch",{url:"/jobs-search",views:{"jobs-search-tab":{controller:"JobsSearchController",templateUrl:"views/employees/jobs-search.html"}}}).state("employees.jobEmployer",{url:"/job/:jobId/employer/:employerId/:employmentId?",views:{"jobs-feed-tab":{controller:"JobEmployerController",templateUrl:"views/employees/job-employer.html"}}}).state("employees.profile",{url:"/profile",views:{"jobs-feed-tab":{controller:"UserProfileController",templateUrl:"views/employees/user-profile.html"}}}).state("employees.profileEdit",{url:"/profile-edit",views:{"jobs-feed-tab":{controller:"UserProfileEditController",templateUrl:"views/employees/user-profile-edit.html"}}}).state("login",{url:"/login/:jobId?",controller:"LoginController",templateUrl:"views/auth/login.html"}).state("employees.register",{url:"/register/:jobId?",views:{"jobs-feed-tab":{controller:"RegisterController",templateUrl:"views/auth/register.html"}}}),o.otherwise("/employees/jobs-feed"),ionic.Platform.isIOS()&&t.backButton.text("הקודם")}function Run(e,o,t,l,r){o.ready(function(){window.cordova&&window.cordova.plugins.Keyboard&&cordova.plugins.Keyboard.hideKeyboardAccessoryBar(!0),window.StatusBar&&StatusBar.styleDefault()});var s="418558622231-jg4kdcbac9fmgos83akh96377imit7op.apps.googleusercontent.com",i="https://2-dot-jobhopapp.appspot.com/_ah/api",a="jobhopApi",n="v2",p="AIzaSyBotq6gFsSBe5ZNwdSRkiNdjW1miLqdDjQ";t.load(a,n,i),t.load("storage","v1"),l.setClient(s),l.setScope("https://www.googleapis.com/auth/userinfo.email");var m=!1;e.$watch(function(){return r.gapi&&r.gapi.client},function(e){m||angular.isUndefined(e)||(e.setApiKey(p),m=!0)})}angular.module("jobhop",["ionic","angular-google-gapi","ngCordova","ngStorage","ionicLazyLoad","uiGmapgoogle-maps","ionic-datepicker","nl2br","jobhop.controllers","jobhop.directives","jobhop.services","jobhop.filters"]).config(Config).run(Run),Config.$inject=["$stateProvider","$urlRouterProvider","$ionicConfigProvider"],Run.$inject=["$rootScope","$ionicPlatform","GApi","GAuth","$window"];
angular.module("app").run(["$templateCache",function(n){n.put("views/auth/login.html",'<ion-view title="התחברות">\n    <ion-content padding="true">\n        <!--\n        <form name="login.form" ng-submit="login()" novalidate>\n            <ion-list>\n                <ion-item class="item-input item-stacked-label"\n                    ng-class="{ \'form-input-invalid\': login.form.identifier.$invalid && login.form.identifier.$dirty }">\n                    <label>\n                        <span class="input-label">אימייל</span>\n                        <input type="email" ng-model="login.data.identifier" name="identifier" placeholder="example@site.com" required>\n                    </label>\n                </ion-item>\n                <ion-item class="item-input item-stacked-label"\n                    ng-class="{ \'form-input-invalid\': login.form.secret.$invalid && login.form.secret.$dirty }">\n                    <label>\n                        <span class="input-label">סיסמא</span>\n                        <input type="password" ng-model="login.data.secret" name="secret" placeholder="Gf/vj[5w" ng-minlength="6" required>\n                    </label>\n                </ion-item>\n            </ion-list>\n            <button class="button button-balanced button-block icon-left ion-chevron-left" ng-disabled="login.form.$invalid">\n                התחבר\n            </button>\n            <div class="text-center">\n                או\n            </div>\n        </form>\n        -->\n        <button class="button button-positive button-block icon-right ion-social-facebook" ng-click="login()">\n            התחבר באמצעות פייסבוק\n        </button>\n    </ion-content>\n</ion-view>\n'),n.put("views/auth/register.html",'<ion-view title="הרשמה">\n    <ion-content padding="true">\n        <form name="register.form" ng-submit="submit()" novalidate>\n            <div id="register-upload-image" class="text-center">\n                <label>\n                    <img ng-src="{{ profileImage.data }}" on-tap="chooseImage()">\n                </label>\n            </div>\n            <ion-list>\n                <ion-item class="item-input item-stacked-label"\n                    ng-class="{ \'form-input-invalid\': register.form.first_name.$invalid && register.form.first_name.$dirty }">\n                    <label>\n                        <span class="input-label">\n                            שם פרטי\n                        </span>\n                        <input type="text" ng-model="register.data.first_name" name="first_name" placeholder="ישראל" required>\n                    </label>\n                </ion-item>\n                <ion-item class="item-input item-stacked-label"\n                    ng-class="{ \'form-input-invalid\': register.form.last_name.$invalid && register.form.last_name.$dirty }">\n                    <label>\n                        <span class="input-label">\n                            שם משפחה\n                        </span>\n                        <input type="text" ng-model="register.data.last_name" name="last_name" placeholder="ישראלי" required>\n                    </label>\n                </ion-item>\n                <ion-item class="item-input item-stacked-label"\n                    ng-class="{ \'form-input-invalid\': register.form.description.$invalid && register.form.description.$dirty }">\n                    <label>\n                        <span class="input-label">תיאור</span>\n                        <textarea ng-model="register.data.description" name="description"\n placeholder="פה זה המקום לרשום כמה שורות על עצמך.\nמעסיקים רוצים לדעת איזה מן בנאדם אתה, איפה יצא לך לעבוד כבר, איך אתה מתנייד, ומה היתרונות שלך." style="height:60px" required></textarea>\n                    </label>\n                </ion-item>\n                <ion-item class="item-input item-stacked-label"\n                    ng-class="{ \'form-input-invalid\': register.form.phone_number.$invalid && register.form.phone_number.$dirty }">\n                    <label>\n                        <span class="input-label">מספר פלאפון</span>\n                        <input type="text" ng-model="register.data.phone_number" name="phone_number" placeholder="050-1234567" required>\n                    </label>\n                </ion-item>\n                <ion-item class="item-input item-stacked-label"\n                    ng-class="{ \'form-input-invalid\': register.form.address.$invalid && register.form.address.$dirty }">\n                    <label>\n                        <span class="input-label">עיר מגורים</span>\n                        <input type="text" ng-model="register.data.address" name="address" placeholder="תל אביב" required>\n                    </label>\n                </ion-item>\n                <ion-item class="item-input item-select item-select-rtl"\n                    ng-class="{ \'form-input-invalid\': register.form.gender.$invalid && register.form.gender.$dirty }">\n                    <label>\n                        <span class="input-label">\n                            מין\n                        </span>\n                        <select ng-model="register.data.gender" name="gender" ng-options="gender.value as gender.label for gender in enums.genders" required></select>\n                    </label>\n                </ion-item>\n                <ion-item class="item-input item-stacked-label">\n                    <label on-tap="chooseDate()">\n                        <span class="input-label">תאריך לידה</span>\n                        <input type="text" ng-attr-value="{{ register.data.birth_date | date: \'dd-MM-yyyy\' }}" style="background-color: #fff;" disabled>\n                    </label>\n                </ion-item>\n            </ion-list>\n            <small class="assertive">* כל השדות חובה. אין הרבה גם ככה :)</small>\n            <button class="button button-positive button-block icon-right ion-social-facebook" ng-disabled="register.form.$invalid">\n                התחבר באמצעות פייסבוק\n            </button>\n        </form>\n    </ion-content>\n</ion-view>\n'),n.put("views/employees/job-employer.html",'<ion-view ng-attr-title="{{ employer.title || \'סניף\' }}">\n    <ion-nav-title><span ng-if="loaded" ng-bind="employer.title"></span></ion-nav-title>\n    <ion-content padding="false">\n      <div ng-if="loaded && !error">\n        <div class="job" ng-style="{ \'background-color\': employer.backgroundColor }">\n            <div class="job-profile-image">\n                <img ng-src="{{ employer.profile_image_uri }}">\n            </div>\n            <div class="job-data">\n                <div class="job-employer-name" ng-bind="employer.title"></div>\n                <div class="job-position" ng-bind="employer.address"></div>\n            </div>\n        </div>\n\n        <div class="clearfix"></div>\n\n        <div id="job" class="padding">\n            <p id="employer-description" ng-bind="employer.description" style="margin-top: 10px;"></p>\n            <hr>\n            <div id="job-more-details">\n                <div id="job-more-details-header">מידע נוסף על הסניף</div>\n                <hr>\n                <div>\n                  <div class="icon">\n                      <i class="icon ion-ios-location-outline"></i>\n                  </div>\n                  <div>\n                      <strong>מיקום:</strong>\n                      <span ng-bind="employer.address"></span>\n                  </div>\n                  <div class="clearfix"></div>\n                </div>\n                <div ng-show="employment && employment.status == \'EMPLOYEE\' && employment.status == \'AWAITING_FINAL_APPROVAL\'">\n                    <div class="icon">\n                        <i class="icon ion-ios-telephone-outline"></i>\n                    </div>\n                    <div>\n                        <strong>מספר פלאפון:</strong>\n                        <span ng-bind="employer.phone_number"></span>\n                    </div>\n                    <div class="clearfix"></div>\n                </div>\n            </div>\n        </div>\n\n        <div class="clearfix"></div>\n      </div>\n      <div ng-show="error" class="padding">\n          קיימת תקלה טכנית, אנא נסה שנית\n      </div>\n    </ion-cotent>\n</ion-view>\n'),n.put("views/employees/job-template.html",'<a ui-sref="employees.job({ jobId: job.id })" class="job" ng-style="{ \'background-image\': \'url(\\\'img/feed-item-background-\' + job.index % 4 + \'.png\\\')\' }" ng-if="link">\n    <div class="job-profile-image">\n        <img image-lazy-src="{{ job.logo_url }}">\n    </div>\n    <div class="job-data">\n        <p class="job-employer-name" ng-bind="job.employer_name"></p>\n        <p class="job-position" ng-bind="job.position"></p>\n        <p class="job-description" ng-bind="job.description | cut: true: 100"></p>\n    </div>\n    <div class="job-address">\n        <i class="icon ion-ios-location-outline"></i>\n        <address ng-bind="job.employer_address"></address>\n    </div>\n</a>\n\n<div class="job" ng-if="!link">\n    <div class="job-profile-image">\n        <a ui-sref="employees.jobEmployer({ jobId: job.id, employerId: employer.id, employmentId: employee.id || \'\' })" ng-if="job">\n            <img ng-src="{{ employer.profile_image_uri }}">\n        </a>\n    </div>\n    <div class="job-data">\n        <div class="job-employer-name" ng-bind="employer.title"></div>\n        <div class="job-position" ng-bind="job.position"></div>\n    </div>\n</div>\n\n<div class="clearfix"></div>\n'),n.put("views/employees/job.html",'<ion-view ng-attr-title="{{ job.position || \'משרה\' }}">\n    <ion-nav-title><span ng-if="loaded" ng-bind="job.position"></span></ion-nav-title>\n    <ion-content padding="false">\n        <div ng-if="loaded && !error">\n          <job-block employer="employer" job="job" employee="employee" link="false"></job-block>\n          <div id="job" class="padding">\n              <p id="job-description" ng-bind="job.description"></p>\n              <div id="employment-status" class="balanced">\n                  <p ng-if="employee.status == \'APPLICANT\'">\n                      הינך מועמד למשרה\n                  </p>\n                  <p ng-if="employee.status == \'AWAITING_FINAL_APPROVAL\'">\n                      המעסיק אישר את מועמדותך, כעת הינך יכול לאשר התחלת עבודה\n                  </p>\n                  <p ng-if="employee.status == \'EMPLOYEE\'">\n                      הינך מועסק במשרה זו\n                  </p>\n                  <p ng-if="employee.status == \'FINISHED_JOB\'">\n                      סיימת את עבודתך במשרה זו\n                  </p>\n                  <p ng-if="employee.status == \'FIRED\'">\n                      פוטרת ממשרה זו\n                  </p>\n                  <p ng-if="employee.status == \'CANCELED\'">\n                      ביטלת את המועמדות למשרה\n                  </p>\n              </div>\n              <div id="job-buttons">\n                  <button class="button button-balanced" ng-click="openApplyJobPopup()"\n                        ng-if="!employee.status || (employee.status != \'APPLICANT\' && employee.status != \'AWAITING_FINAL_APPROVAL\' && employee.status != \'EMPLOYEE\')">\n                      <i class="icon ion-paper-airplane"></i>\n                      הגש בקשה\n                  </button>\n                  <button class="button button-balanced" ng-click="finalApplyJob()"\n                        ng-if="employee.status == \'AWAITING_FINAL_APPROVAL\'">\n                      <i class="icon ion-ios-checkmark"></i>\n                      התחלת עבודה\n                  </button>\n                  <button class="button button-balanced" ng-click="resignFromJob()"\n                        ng-if="employee.status == \'EMPLOYEE\'">\n                      <i class="icon ion-ios-close"></i>\n                      התפטר\n                  </button>\n                  <button class="button button-balanced" ng-click="cancelApplicationJob()"\n                        ng-if="employee.status == \'APPLICANT\'">\n                      <i class="icon ion-ios-close"></i>\n                      בטל מועמדות\n                  </button>\n                  <button class="button button-assertive" ng-click="cancelApplicationJob()"\n                        ng-if="employee.status == \'AWAITING_FINAL_APPROVAL\'">\n                      <i class="icon ion-ios-close"></i>\n                      ביטול\n                  </button>\n                  <button id="job-share" class="button button-icon button-clear" on-tap="shareJob()">\n                      <i class="icon ion-android-share-alt balanced"></i>\n                  </button>\n                  <button id="job-like" class="button button-icon button-clear" ng-click="likeButtonClick()"\n                        ng-if="!employee.status || employee.status == \'LIKED\' || employee.status == \'UNLIKED\'">\n                      <i class="icon balanced" ng-class="{\n                          \'ion-android-favorite\': employee.status == \'LIKED\',\n                          \'ion-android-favorite-outline\': !employee.status || employee.status == \'UNLIKED\' }"></i>\n                  </button>\n              </div>\n              <hr>\n              <p id="employer-description" ng-bind="employer.description"></p>\n              <hr>\n              <div id="job-more-details">\n                  <div id="job-more-details-header">מידע נוסף על המשרה</div>\n                  <hr>\n                  <div>\n                      <div class="icon">\n                          <i class="icon ion-ios-location-outline"></i>\n                      </div>\n                      <div>\n                          <strong>מיקום:</strong>\n                          <span ng-bind="employer.address"></span>\n                      </div>\n                      <div class="clearfix"></div>\n                  </div>\n                  <div>\n                      <div class="icon">\n                          <i class="icon ion-ios-clock-outline"></i>\n                      </div>\n                      <div>\n                          <strong>\n                            עבודה ב<span ng-bind="job.type"></span>\n                          </strong>\n                      </div>\n                      <div class="clearfix"></div>\n                  </div>\n              </div>\n              <div id="job-requirements" ng-if="job.requirements_general">\n                  <hr>\n                  <div id="job-requirements-header">דרישות המשרה</div>\n                  <div>\n                    <hr>\n                    <div>\n                        <div class="icon">\n                            <i class="icon ion-ios-speedometer"></i>\n                        </div>\n                        <div>\n                            <strong>ניסיון:</strong>\n                            <span ng-bind="job.requirements_general"></span>\n                        </div>\n                        <div>\n                            <strong>גיל:</strong>\n                            <span ng-bind-template="{{ job.requirements_age_min }} - {{ job.requirements_age_max }}" ng-if="job.requirements_age_min && job.requirements_age_max"></span>\n                            <span ng-bind-template="מ-{{ job.requirements_age_min }}" ng-if="job.requirements_age_min && !job.requirements_age_max"></span>\n                            <span ng-bind-template="עד {{ job.requirements_age_max }}" ng-if="job.requirements_age_max && !job.requirements_age_min"></span>\n                        </div>\n                        <div class="clearfix"></div>\n                    </div>\n                  </div>\n              </div>\n              <div id="job-location" ng-if="map.center.latitude && map.center.longitude">\n                <hr>\n                <div id="job-location-header">מיקום המשרה</div>\n                <hr>\n                <div>\n                    <ui-gmap-google-map center=\'map.center\' zoom=\'map.zoom\'>\n                        <ui-gmap-marker coords="marker.cords" options="marker.options" idKey="marker.id"></ui-gmap-marker>\n                    </ui-gmap-google-map>\n                </div>\n              </div>\n          </div>\n        </div>\n        <div ng-show="error" class="padding">\n            קיימת תקלה טכנית, אנא נסה שנית\n        </div>\n    </ion-cotent>\n</ion-view>\n'),n.put("views/employees/jobs-feed.html",'<ion-view title="משרות">\n    <ion-content padding="false" lazy-scroll>\n        <div id="feed">\n            <ion-refresher\n              on-refresh="refreshFeed()">\n            </ion-refresher>\n            <ion-list class="jobs-list" ng-if="loaded && jobs.length && !error">\n                <ion-item ng-repeat="job in jobs" ng-init="job.index = $index">\n                    <job-block job="job" link="true"></job-block>\n                </ion-item>\n            </ion-list>\n            <ion-infinite-scroll ng-if="loaded && !noMoreJobsAvailable && !error" on-infinite="getFeed(true)" distance="10%"></ion-infinite-scroll>\n            <div ng-show="loaded && !jobs.length && !error" class="padding">\n                לא נמצאו משרות\n            </div>\n            <div ng-show="error" class="padding">\n                קיימת תקלה טכנית, אנא נסה שנית\n            </div>\n        </div>\n    </ion-content>\n</ion-view>\n'),n.put("views/employees/jobs-search.html",'<ion-view title="חיפוש משרות">\n    <ion-content lazy-scroll>\n        <div id="search-list" class="list">\n            <label class="item item-input">\n                <span class="input-label">שם בית העסק</span>\n                <input type="text" ng-model="searchData.employer_title">\n            </label>\n            <label class="item item-input">\n                <span class="input-label">תפקיד</span>\n                <input type="text" ng-model="searchData.position">\n            </label>\n            <label class="item item-input item-select item-select-rtl">\n                <span class="input-label">עיר</span>\n                <select ng-options="city.value as city.label for city in enums.cities" ng-model="searchData.address"></select>\n            </label>\n            <label class="item item-input">\n                <span class="input-label">טקסט חופשי</span>\n                <input type="text" ng-model="searchData.open_query">\n            </label>\n        </div>\n        <div id="feed">\n            <div class="padding text-center" ng-if="!loaded && isSearching && !error">\n              <ion-spinner></ion-spinner>\n            </div>\n            <ion-list class="jobs-list" ng-if="loaded && !error">\n                <ion-item ng-repeat="job in jobs" ng-init="job.index = $index">\n                    <job-block job="job" link="true" on-tap="goToJob(job.id, $event)"></job-block>\n                </ion-item>\n            </ion-list>\n            <ion-infinite-scroll ng-if="!noMoreJobsAvailable && loaded && !error" on-infinite="getFeed(true)" distance="10%"></ion-infinite-scroll>\n            <div ng-show="loaded && !jobs.length && !error" class="padding">\n                לא נמצאו משרות\n            </div>\n            <div ng-show="error" class="padding">\n                קיימת תקלה טכנית, אנא נסה שנית\n            </div>\n        </div>\n    </ion-cotent>\n</ion-view>\n'),n.put("views/employees/jobs-user.html",'<ion-view title="המשרות שלי">\n    <ion-content padding="false" lazy-scroll>\n        <div id="feed" ng-if="user.logged">\n            <ion-refresher\n              on-refresh="refreshMyJobs()">\n            </ion-refresher>\n            <ion-list class="jobs-list" ng-if="loaded && jobs.length && !error">\n                <ion-item ng-repeat="job in jobs" ng-init="job.index = $index">\n                    <job-block job="job" link="true" on-tap="goToJob(job.id, $event)"></job-block>\n                </ion-item>\n            </ion-list>\n            <ion-infinite-scroll ng-if="loaded && !noMoreJobsAvailable && !error" on-infinite="getMyJobs(true)" distance="10%"></ion-infinite-scroll>\n            <div ng-show="loaded && !jobs.length && !error" class="padding">\n                לא נמצאו משרות\n            </div>\n            <div ng-show="error" class="padding">\n                קיימת תקלה טכנית, אנא נסה שנית\n            </div>\n        </div>\n        <div ng-show="!user.logged" class="padding">\n            <p>\n                אינך משתמש רשום ולכן אין לך משרות\n            </p>\n            <p>\n                <div class=\'divs-middle\'>\n                    <button class="button button-balanced icon-right ion-log-in" on-tap="loginAndRefresh()">התחבר למערכת</button>\n                </div>\n            </p>\n        </div>\n    </ion-content>\n</ion-view>\n'),n.put("views/employees/notifications-modal.html",'<ion-modal-view>\n    <ion-header-bar class="bar-balanced" align-title="{{ android ? \'right\' : \'center\' }}">\n        <h1 class="title">התראות</h1>\n        <div class="buttons">\n            <button class="button button-icon button-clear ion-close-circled" ng-click="closeNotifications()"></button>\n        </div>\n    </ion-header-bar>\n    <ion-content class="padding">\n        אהלן\n    </ion-content>\n</ion-modal-view>\n'),n.put("views/employees/tabs-android.html",'<ion-view>\n    <!--\n    <ion-tabs class="tabs-striped tabs-top tabs-background-dark tabs-color-balanced tabs-icon-right">\n    -->\n    <ion-tabs class="tabs-striped tabs-top tabs-balanced" ng-class="hideTabs">\n        <ng-include src="\'views/employees/tabs.html\'"></ng-include>\n    </ion-tabs>\n</ion-view>\n'),n.put("views/employees/tabs-ios.html",'<ion-view>\n    <ion-tabs class="tabs-balanced tabs-icon-top" ng-class="hideTabs">\n        <ng-include src="\'views/employees/tabs.html\'"></ng-include>\n    </ion-tabs>\n</ion-view>\n'),n.put("views/employees/tabs.html",'<ion-tab title="משרות" icon-on="{{ !android ? \'ion-ios-paper\' : \'\' }}" icon-off="{{ !android ? \'ion-ios-paper-outline\' : \'\' }}" href="/employees/jobs-feed">\n    <ion-nav-view name="jobs-feed-tab"></ion-nav-view>\n</ion-tab>\n<ion-tab title="המשרות שלי" icon-on="{{ !android ? \'ion-ios-briefcase\' : \'\' }}" icon-off="{{ !android ? \'ion-ios-briefcase-outline\' : \'\' }}" href="/employees/jobs-user">\n    <ion-nav-view name="jobs-user-tab"></ion-nav-view>\n</ion-tab>\n<ion-tab title="חיפוש משרות" icon-on="{{ !android ? \'ion-ios-search-strong\' : \'\' }}" icon-off="{{ !android ? \'ion-ios-search\' : \'\' }}" href="/employees/jobs-search">\n    <ion-nav-view name="jobs-search-tab"></ion-nav-view>\n</ion-tab>\n'),n.put("views/employees/user-profile-edit.html",'<ion-view title="עריכת פרופיל">\n    <ion-content padding="true">\n        <form name="profileEdit.form" ng-submit="submit()" novalidate>\n            <div id="register-upload-image" class="text-center">\n                <label>\n                    <img ng-src="{{ profileImage.data }}" on-tap="chooseImage()">\n                </label>\n            </div>\n            <ion-list>\n                <ion-item class="item-input item-stacked-label"\n                    ng-class="{ \'form-input-invalid\': profileEdit.form.first_name.$invalid && profileEdit.form.first_name.$dirty }">\n                    <label>\n                        <span class="input-label">\n                            שם פרטי\n                        </span>\n                        <input type="text" ng-model="profileEdit.data.first_name" name="first_name" placeholder="ישראל" required>\n                    </label>\n                </ion-item>\n                <ion-item class="item-input item-stacked-label"\n                    ng-class="{ \'form-input-invalid\': profileEdit.form.last_name.$invalid && profileEdit.form.last_name.$dirty }">\n                    <label>\n                        <span class="input-label">\n                            שם משפחה\n                        </span>\n                        <input type="text" ng-model="profileEdit.data.last_name" name="last_name" placeholder="ישראלי" required>\n                    </label>\n                </ion-item>\n                <ion-item class="item-input item-stacked-label"\n                    ng-class="{ \'form-input-invalid\': profileEdit.form.description.$invalid && profileEdit.form.description.$dirty }">\n                    <label>\n                        <span class="input-label">תיאור</span>\n                        <textarea ng-model="profileEdit.data.description" name="description"\n placeholder="פה זה המקום לרשום כמה שורות על עצמך.\nמעסיקים רוצים לדעת איזה מן בנאדם אתה, איפה יצא לך לעבוד כבר, איך אתה מתנייד, ומה היתרונות שלך." style="height:60px" required></textarea>\n                    </label>\n                </ion-item>\n                <ion-item class="item-input item-stacked-label"\n                    ng-class="{ \'form-input-invalid\': profileEdit.form.phone_number.$invalid && profileEdit.form.phone_number.$dirty }">\n                    <label>\n                        <span class="input-label">מספר פלאפון</span>\n                        <input type="text" ng-model="profileEdit.data.phone_number" name="phone_number" placeholder="050-1234567" required>\n                    </label>\n                </ion-item>\n                <ion-item class="item-input item-stacked-label"\n                    ng-class="{ \'form-input-invalid\': profileEdit.form.address.$invalid && profileEdit.form.address.$dirty }">\n                    <label>\n                        <span class="input-label">עיר מגורים</span>\n                        <input type="text" ng-model="profileEdit.data.address" name="address" placeholder="תל אביב" required>\n                    </label>\n                </ion-item>\n                <ion-item class="item-input item-select item-select-rtl"\n                    ng-class="{ \'form-input-invalid\': profileEdit.form.gender.$invalid && profileEdit.form.gender.$dirty }">\n                    <label>\n                        <span class="input-label">\n                            מין\n                        </span>\n                        <select ng-model="profileEdit.data.gender" name="gender" ng-options="gender.value as gender.label for gender in enums.genders" required></select>\n                    </label>\n                </ion-item>\n                <ion-item class="item-input item-stacked-label">\n                    <label on-tap="chooseDate()">\n                        <span class="input-label">תאריך לידה</span>\n                        <input type="text" ng-attr-value="{{ profileEdit.data.birth_date | date: \'dd-MM-yyyy\' }}" style="background-color: #fff;" disabled>\n                    </label>\n                </ion-item>\n            </ion-list>\n            <small class="assertive">* כל השדות חובה. אין הרבה גם ככה :)</small>\n            <button class="button button-balanced button-block icon-left ion-chevron-left" ng-disabled="profileEdit.form.$invalid">\n                עדכן\n            </button>\n        </form>\n    </ion-content>\n</ion-view>\n'),n.put("views/employees/user-profile.html",'<ion-view title="פרופיל" hide-tabs>\n    <ion-content padding="true">\n        <div id="profile">\n            <div id="profile-image">\n                <img ng-src="{{ user.profile.profile_image_uri }}" ng-if="user.profile.profile_image_uri">\n                <img src="img/jobhop-icon.png" class="image-not-rounded" ng-if="!user.profile.profile_image_uri">\n            </div>\n            <div id="profile-name" ng-bind-template="{{ user.profile.first_name }} {{ user.profile.last_name }}"></div>\n            <div id="profile-details">\n                <span ng-if="user.profile.birth_date">\n                    <span ng-bind="user.profile.gender == \'MALE\' ? \'בן\' : \'בת\'"></span>\n                    <span ng-bind="user.profile.age"></span>\n                </span\n                ><span ng-if="user.profile.address">,\n                    <span ng-bind="user.profile.address"></span>\n                </span>\n            </div>\n            <hr>\n            <div>\n                <div class="profile-header">קצת על עצמי</div>\n                <hr>\n                <p id="profile-about-me" ng-bind-html="user.profile.description | nl2br" ng-if="user.profile.description"></p>\n                <strong ng-if="!user.profile.description">לא צוין מידע</strong>\n            </div>\n            <hr ng-hide="true">\n            <div ng-hide="true">\n                <div class="profile-header">ניסיון תעסוקתי</div>\n                <hr>\n                <div id="profile-experience">\n                    <div>\n                        <div class="profile-experience-timeline">2015</div>\n                        <div class="profile-experience-description">ראש ממשלת ישראל</div>\n                    </div>\n                    <div>\n                        <div class="profile-experience-timeline">2010-2014</div>\n                        <div class="profile-experience-description">נשיא בית המשפט העליון</div>\n                    </div>\n                    <div>\n                        <div class="profile-experience-timeline">2005-2009</div>\n                        <div class="profile-experience-description">מנכ"ל בנק הפועלים</div>\n                    </div>\n                    <div>\n                        <div class="profile-experience-timeline">2003</div>\n                        <div class="profile-experience-description">צייר</div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </ion-content>\n</ion-view>\n')}]);
angular.module("jobhop.controllers",[]);
function JobController(e,o,t,n,i,l,u,a,s){o.employer=!1,o.job=!1,o.employee=!1,o.init=function(){return o.loaded=!1,o.error=!1,o.getJob()},o.getJob=function(){return l.show(),t.getJob(a.jobId).then(function(e){o.employer=e.employer,o.job=e.job,o.employee=angular.isUndefined(e.employee.status)?{}:e.employee,o.map={center:{latitude:o.job.geo_point_lat,longitude:o.job.geo_point_lon},zoom:12},o.marker={id:0,cords:{latitude:o.job.geo_point_lat,longitude:o.job.geo_point_lon},options:{labelContent:o.employer.title}},o.loaded=!0,l.hide()},function(e){o.error=!0,l.hide()})};var p=function(e,o){var t=u.alert({title:e,template:o,okText:"המשך",okType:"button-balanced"});return t},d=function(e,o,t,n){var i=u.confirm({title:e,template:o,okText:t||"אישור",okType:"button-balanced",cancelText:n||"ביטול"});return i};o.openApplyJobPopup=function(){if(o.user.logged){var i=u.show({title:"הגשת מועמדות",template:"זאת ההזדמנות שלך לעזור למעסיק להכיר אותך.<br>    כדי שהמעסיק יזכור אותך, תראה לו שאתה מיוחד ותקבע את הרושם הראשוני שלך.<br>    <br>    מעסיקים מתעדפים מועמדים שמצלמים סרטון קצר של עצמם, ככה שגם אם אין לך מה לומר, פשוט ספר איזה דברים גורמים לך לאבד את תחושת הזמן :)<br>    אל תדאג, פעם הבאה תוכל להשתמש באותו הסרטון.",buttons:[{text:"בלי סרטון",onTap:function(){return"no_video"}},{text:"סרטון חדש",type:"button-positive",onTap:function(){return"new_video"}},{text:"סרטון אחרון",type:"button-balanced",onTap:function(){return"old_video"}}]});i.then(function(i){if("new_video"==i)if(e.isUploadingVideo)p("מגבלת העלאת סרטונים","הינך מעלה ברקע סרטון אחד למעסיק. אנא המתן שסרטון זה יעלה לגמרי ואז תוכל להעלות עוד סרטונים");else{o.uploadPercent=0;var u=!0;l.show(),n.captureVideo({duration:30}).then(function(n){t.uploadVideo(n[0]).then(function(n){e.isUploadingVideo=!1,t.applyJobWithVideo(o.job.id,n).then(function(e){p("הסרטון הועלה","הסרטון הועלה בהצלחה אל המעסיק").then(function(){o.employee={id:e.employment_message.employment_urlsafe_key,status:e.employment_message.status}})},function(){p("איראה שגיאה","אירעה שגיאה במהלך הגשת מועמדות למשרה, אנא נסה שנית")})},function(e){p("איראה שגיאה","אירעה שגיאה במהלך הגשת מועמדות למשרה, אנא נסה שנית"),l.hide()},function(o){u&&(u=!1,e.isUploadingVideo=!0,l.hide(),p("הסרטון בהעלאה","הסרטון בהעלאה אל המעסיק, אנא המתן שהסרטון יעלה במלואו")),e.videoUploadingPercent=o.loaded/o.total*100})})}else"old_video"==i?angular.isUndefined(o.user.profile.profile_video_uri)?p("לא העלאת סרטון קודם","לא העלאת סרטון קודם, לכן עליך להעלות סרטון למעסיק. אל דאגה, בהמשך תוכל להשתמש שוב בסרטון זה "):(l.show(),t.applyJobWithVideo(o.job.id).then(function(e){o.employee={id:e.employment_message.employment_urlsafe_key,status:e.employment_message.status},l.hide()},function(){l.hide(),p("איראה שגיאה","אירעה שגיאה במהלך הגשת מועמדות למשרה, אנא נסה שנית")})):"no_video"==i&&(l.show(),t.applyJob(o.job.id).then(function(e){o.employee={id:e.employment_urlsafe_key,status:e.status},l.hide()},function(){l.hide(),p("איראה שגיאה","אירעה שגיאה במהלך הגשת מועמדות למשרה, אנא נסה שנית")}))})}else o.login().then(function(e){e&&o.init().then(function(){(angular.isUndefined(o.employee.status)||"APPLICANT"!=o.employee.status&&"AWAITING_FINAL_APPROVAL"!=o.employee.status&&"EMPLOYEE"!=o.employee.status)&&o.openApplyJobPopup()})})},o.finalApplyJob=function(){l.show(),t.finalApplyJob(o.employee.id).then(function(e){o.employee={id:e.employment_urlsafe_key,status:e.status},l.hide()},function(){l.hide(),p("איראה שגיאה","אירעה שגיאה במהלך אישור התחלת עבודה, אנא נסה שנית")})},o.resignFromJob=function(){d("התפטרות","האם אתה בטוח שאתה רוצה להתפטר ממשרה זו?").then(function(e){e&&(l.show(),t.resignFromJob(o.employee.id).then(function(e){o.employee={id:e.employment_urlsafe_key,status:e.status},l.hide()},function(){l.hide(),p("איראה שגיאה","אירעה שגיאה במהלך התפטרות ממשרה, אנא נסה שנית")}))})},o.cancelApplicationJob=function(){d("ביטול מועמדות למשרה","האם אתה בטוח שאתה רוצה לבטל מועמדות למשרה?").then(function(e){e&&(l.show(),t.cancelApplicationJob(o.employee.id).then(function(e){o.employee={id:e.employment_urlsafe_key,status:e.status},l.hide()},function(){l.hide(),p("איראה שגיאה","אירעה שגיאה במהלך ביטול מועמדות למשרה, אנא נסה שנית")}))})},o.likeButtonClick=function(){o.user.logged?angular.isUndefined(o.employee.status)||"UNLIKED"==o.employee.status?o.likeJob():o.dislikeJob():o.login().then(function(e){e&&o.init().then(function(){(angular.isUndefined(o.employee.status)||"UNLIKED"==o.employee.status)&&o.likeJob()})})},o.likeJob=function(){l.show(),t.likeJob(o.job.id).then(function(e){o.employee={id:e.employment_urlsafe_key,status:e.status},l.hide()},function(){l.hide(),p("איראה שגיאה","אירעה שגיאה במהלך הוספת המשרה למשרות שלי, אנא נסה שנית")})},o.dislikeJob=function(){l.show(),t.dislikeJob(o.job.id).then(function(e){o.employee={id:e.employment_urlsafe_key,status:e.status},l.hide()},function(){p("איראה שגיאה","אירעה שגיאה במהלך מחיקת המשרה מהמשרות שלי, אנא נסה שנית")})},o.shareJob=function(){i.share("היי! דרושים "+o.job.position+" ל- "+o.employer.title+". לחץ כאן כדי להגיש מועמדות",!1,!1,"http://www.jobhop.co.il/jobs/"+o.job.id)},o.init()}angular.module("jobhop.controllers").controller("JobController",JobController),JobController.$inject=["$rootScope","$scope","JobHopAPI","$cordovaCapture","$cordovaSocialSharing","$ionicLoading","$ionicPopup","$stateParams","$state"];
function JobEmployerController(o,e,n,t){o.employer=!1,o.employment=!1,o.loaded=!1,o.error=!1,o.init=function(){o.getEmployer().then(function(){""!=t.employmentId&&o.getEmployment()})},o.getEmployer=function(){return n.show(),e.getEmployer(t.employerId).then(function(e){o.employer=e,o.loaded=!0,n.hide()},function(e){o.error=!0,n.hide()})},o.getEmployment=function(){return n.show(),e.getEmployment(t.employmentId).then(function(e){o.employment=e,o.loaded=!0,n.hide()},function(e){o.error=!0,n.hide()})},o.init()}angular.module("jobhop.controllers").controller("JobEmployerController",JobEmployerController),JobEmployerController.$inject=["$scope","JobHopAPI","$ionicLoading","$stateParams"];
function JobsFeedController(e,o,n,t){var r={};e.setCurrentPosition=function(){return n.getCurrentPosition({timeout:1e4,enableHighAccuracy:!0}).then(function(e){angular.isUndefined(e)||angular.isUndefined(e.coords)||angular.isUndefined(e.coords.latitude)||angular.isUndefined(e.coords.longitude)?r={}:(r.geo_point_lat=e.coords.latitude,r.geo_point_lon=e.coords.longitude)},function(e){r={}})},e.init=function(o){angular.isUndefined(o)&&(o=!1),e.jobs=[],e.loaded=!1,e.error=!1,e.nextCurs="",e.noMoreJobsAvailable=!1;var n={};o||e.getFeed(),e.setCurrentPosition().then(function(){o?e.getFeed(!1,!0):angular.isUndefined(n.geo_point_lat)||angular.isUndefined(n.geo_point_lon)||e.getFeed()},function(){o&&e.getFeed(!1,!0)})},e.refreshFeed=function(){e.init(!0)},e.getFeed=function(n,i){angular.isUndefined(n)?n=!1:angular.isUndefined(i)&&(i=!1);var l;n?l=o.getFeed(e.nextCurs,r):(i?(e.loaded=!1,e.noMoreJobsAvailable=!1):t.show(),l=o.getFeed(!1,r)),l.then(function(o){e.nextCurs=o.nextCurs,angular.isUndefined(e.nextCurs)&&(e.noMoreJobsAvailable=!0),n?(e.jobs=e.jobs.concat(o.jobs),e.$broadcast("scroll.infiniteScrollComplete")):(e.jobs=o.jobs,e.loaded=!0,i||t.hide(),i&&e.$broadcast("scroll.refreshComplete"))},function(o){e.error=!0,n||i?e.$broadcast(i?"scroll.refreshComplete":"scroll.infiniteScrollComplete"):t.hide()})},e.init()}angular.module("jobhop.controllers").controller("JobsFeedController",JobsFeedController),JobsFeedController.$inject=["$scope","JobHopAPI","$cordovaGeolocation","$ionicLoading"];
function JobsSearchController(e,o,a,n,r){e.jobs=[],e.loaded=!1,e.error=!1,e.isSearching=!1,e.searchData={employer_title:"",position:"",address:"",open_query:""},e.enums={cities:[{label:"הכל",value:""},{label:"נתניה",value:"נתניה"},{label:"תל אביב",value:"תל אביב"},{label:"נהריה",value:"נהריה"}]},e.$watch("searchData",function(o){e.error=!1;var a=!0;angular.forEach(o,function(e,o){e&&(a=!1)}),a?(e.loaded=!1,e.isSearching=!1):(angular.isUndefined(e.typingTimeout)||r.cancel(e.typingTimeout),e.typingTimeout=r(function(){e.jobs=[],e.loaded=!1,e.noMoreJobsAvailable=!1,e.isSearching=!0,e.getFeed()},500))},!0),e.getFeed=function(a){angular.isUndefined(a)&&(a=!1);var n;n=a?o.getFeed(e.nextCurs,e.searchData):o.getFeed(!1,e.searchData),n.then(function(o){e.nextCurs=o.nextCurs,angular.isUndefined(e.nextCurs)&&(e.noMoreJobsAvailable=!0),a?(e.jobs=e.jobs.concat(o.jobs),e.$broadcast("scroll.infiniteScrollComplete")):(e.jobs=o.jobs,e.loaded=!0)},function(o){e.error=!0,a&&e.$broadcast("scroll.infiniteScrollComplete")})},e.goToJob=function(e,o){o.preventDefault(),n.go("employees.jobsFeed"),r(function(){n.go("employees.job",{jobId:e})},0)}}angular.module("jobhop.controllers").controller("JobsSearchController",JobsSearchController),JobsSearchController.$inject=["$scope","JobHopAPI","JobsPerPage","$state","$timeout"];
function JobsUserController(o,e,n,r,l){o.init=function(e){o.jobs=[],o.loaded=!1,o.error=!1,o.nextCurs="",o.noMoreJobsAvailable=!1,o.user.logged&&(!angular.isUndefined(e)&&e?o.getMyJobs(!1,!0):o.getMyJobs())},o.getMyJobs=function(r,l){angular.isUndefined(r)?r=!1:angular.isUndefined(l)&&(l=!1);var s;r?s=e.getFeed(o.nextCurs,!1,!0):(l?(o.loaded=!1,o.noMoreJobsAvailable=!1):n.show(),s=e.getFeed(!1,!1,!0)),s.then(function(e){o.nextCurs=e.nextCurs,angular.isUndefined(o.nextCurs)&&(o.noMoreJobsAvailable=!0),r?(o.jobs=o.jobs.concat(e.jobs),o.$broadcast("scroll.infiniteScrollComplete")):(o.jobs=e.jobs,o.loaded=!0,l||n.hide(),l&&o.$broadcast("scroll.refreshComplete"))},function(e){o.error=!0,r||l?o.$broadcast(l?"scroll.refreshComplete":"scroll.infiniteScrollComplete"):n.hide()})},o.goToJob=function(o,e){e.preventDefault(),r.go("employees.jobsFeed"),l(function(){r.go("employees.job",{jobId:o})},0)},o.refreshMyJobs=function(){o.init(!0)},o.loginAndRefresh=function(){o.login().then(function(e){e&&o.init()})},o.init()}angular.module("jobhop.controllers").controller("JobsUserController",JobsUserController),JobsUserController.$inject=["$scope","JobHopAPI","$ionicLoading","$state","$timeout"];
function LoginController(o,n,r,l,e,t,i){}angular.module("jobhop.controllers").controller("LoginController",LoginController),LoginController.$inject=["$scope","JobHopAPI","$cordovaFacebook","$ionicLoading","$ionicPopup","$stateParams","$state"];
function MainController(o,e,n,t,i,a,r,s,l,c,p,u,d,f){u.user=u.user||{profile:{},baseMessage:{},logged:!1},o.user=u.user,o.$watch(function(){return u.user},function(e){o.user=e},!0),t.fromTemplateUrl("views/notifications-modal.html",{scope:e,animation:"slide-in-up"}).then(function(o){e.notificationsModal=o}),e.openNotifications=function(){e.notificationsModal.show()},e.closeNotifications=function(){e.notificationsModal.hide()};var m={identifier:"",secret:""},g=function(o,e){var n=a.alert({title:o,template:e,okText:"המשך",okType:"button-balanced"});return n};e.login=function(){return n.logout(),p.login(["user_friends","email","user_birthday"]).then(function(o){return i.show(),m.identifier=o.authResponse.userID,m.secret=o.authResponse.accessToken,n.login("FACEBOOK",m).then(function(o){return i.hide(),o?g("ההתחברות בוצעה בהצלחה","התחברת בהצלחה ל-JobHop"):(angular.isUndefined(d.jobId)||""==d.jobId?r.go("employees.register"):r.go("employees.register",{jobId:d.jobId}),!1)})},function(o){return i.hide(),console.log(o),o})},e.logout=function(){var o=a.confirm({title:"התנתקות",template:"האם אתה בטוח שאתה רוצה להתנתק?",okText:"אישור",okType:"button-balanced",cancelText:"יציאה"});o.then(function(o){o&&n.logout().then(function(){r.go("employees.jobsFeed")},function(){r.go("employees.jobsFeed")})})},o.android=!1,o.android=ionic.Platform.isAndroid()?!0:!1,e.shareApp=function(){l.share("היי! מצאתי אפליקציה ממש טובה לחיפוש עבודות... ממליץ לך להוריד:",!1,!1,"https://play.google.com/store/apps/details?id=com.jobhopapp.app")},e.rateApp=function(){var o="com.jobhopapp.app",e="com.jobhopapp.app";ionic.Platform.isAndroid()?c.open("market://details?id="+o,"_system"):ionic.Platform.isIOS()&&c.open("itms-apps://itunes.apple.com/app/"+e,"_system")},e.mailToCEO=function(){s.isAvailable().then(function(){s.open({to:"raz@jobhop.co.il",subject:"",body:"",isHtml:!1})},function(){a.alert({title:"מכשיר לא תומך",template:"מכשיר הפלאפון שלך לא תומך בשליחת אימייל",okText:"המשך",okType:"button-balanced"})})},e.goToProfile=function(){r.go("employees.profile")},o.$on("$stateChangeSuccess",function(n,t,i){e.currentState=t,ionic.Platform.isAndroid()!=o.android&&(o.android=!e.android)})}angular.module("jobhop.controllers").controller("MainController",MainController),MainController.$inject=["$rootScope","$scope","JobHopAPI","$ionicModal","$ionicLoading","$ionicPopup","$state","$cordovaEmailComposer","$cordovaSocialSharing","$cordovaInAppBrowser","$cordovaFacebook","$localStorage","$stateParams","$timeout"];
function RegisterController(e,t,a,o,i,r,n,d,l){e.profileImage={"default":"img/no-thumb.gif",data:"img/no-thumb.gif"},e.register={form:"",data:{first_name:"",last_name:"",description:"",address:"",phone_number:"",birth_date:new Date,gender:"",profile_image_uri:""}},e.getUserProfileData=function(){r.show({delay:100}),o.api("/me").then(function(t){e.profileImage["default"]="https://graph.facebook.com/"+t.id+"/picture?type=large",e.profileImage.data=e.profileImage["default"],e.register.data.first_name=t.first_name,e.register.data.last_name=t.last_name,angular.isUndefined(t.gender)||"male"!=t.gender&&"female"!=t.gender||(e.register.data.gender=t.gender.toUpperCase()),angular.isUndefined(t.birthday)||(e.register.data.birth_date=new Date(t.birthday)),r.hide()},function(){r.hide()})},e.init=function(){e.getUserProfileData()},e.enums={genders:[{label:"זכר",value:"MALE"},{label:"נקבה",value:"FEMALE"}]},e.chooseImage=function(){a.getPicture({quality:100,destinationType:Camera.DestinationType.DATA_URL,sourceType:Camera.PictureSourceType.SAVEDPHOTOALBUM,allowEdit:!0,encodingType:Camera.EncodingType.JPEG,targetWidth:800,targetHeight:800,popoverOptions:CameraPopoverOptions,saveToPhotoAlbum:!0}).then(function(t){e.profileImage.data="data:image/jpeg;base64,"+t})},e.chooseDate=function(){var t=new Date("01/01/1960"),a=new Date;a.setTime(a.valueOf()-31536e7),ionic.Platform.isAndroid()&&(a=a.valueOf(),t=t.valueOf()),i.show({date:e.register.data.birth_date,minDate:t,maxDate:a,doneButtonLabel:"אישור",okText:"אישור",doneButtonColor:"#00B763",cancelButtonLabel:"ביטול",cancelText:"ביטול"}).then(function(t){e.register.data.birth_date=t})};var g=function(e,t){var a=n.alert({title:e,template:t,okText:"המשך",okType:"button-balanced"});return a},s=function(e){return"function"==typeof e.getMonth?e.getUTCFullYear()+"-"+u(e.getUTCMonth()+1)+"-"+u(e.getUTCDate())+"T"+u(e.getUTCHours())+":"+u(e.getUTCMinutes())+":"+u(e.getUTCSeconds())+"Z":e},u=function(e){return 10>e?"0"+e:e};e.submit=function(a){angular.isUndefined(a)&&(imageUpload=!1),a?(e.register.data.birth_date=s(e.register.data.birth_date),t.register("FACEBOOK",e.register.data).then(function(){r.hide(),g("ההרשמה בוצעה בהצלחה","נרשמת בהצלחה ל-JobHop! הינך מועבר לדף משרות").then(angular.isUndefined(d.jobId)||""==d.jobId?function(){l.go("employees.jobsFeed")}:function(){l.go("employees.job",{jobId:d.jobId})})},function(e){r.hide(),409==e.code?g("אימייל תפוס","כתובת אימייל זו תפוסה"):g("אירעה שגיאה","אירעה שגיאה בתקשורת עם המערכת")})):(r.show(),e.register.form.$valid&&(e.profileImage.data!=e.profileImage["default"]?t.uploadImage(e.profileImage.data).then(function(t){e.register.data.profile_image_uri=t,e.submit(!0)},function(){g("אירעה שגיאה","אירעה שגיאה בתקשורת עם המערכת")}):(e.register.data.profile_image_uri=e.profileImage.data,e.submit(!0))))},e.init()}angular.module("jobhop.controllers").controller("RegisterController",RegisterController),RegisterController.$inject=["$scope","JobHopAPI","$cordovaCamera","$cordovaFacebook","$cordovaDatePicker","$ionicLoading","$ionicPopup","$stateParams","$state"];
function UserProfileController(){}angular.module("jobhop.controllers").controller("UserProfileController",UserProfileController),UserProfileController.$inject=[];
function UserProfileEditController(e,t,o,i,a,r,n){e.profileImage={original:e.user.profile.profile_image_uri||"img/no-thumb.gif",data:e.user.profile.profile_image_uri||"img/no-thumb.gif"};var l=e.user.profile;l.birth_date=new Date(l.birth_date),e.profileEdit={form:"",data:l},e.enums={genders:[{label:"זכר",value:"MALE"},{label:"נקבה",value:"FEMALE"}]},e.chooseImage=function(){o.getPicture({quality:100,destinationType:Camera.DestinationType.DATA_URL,sourceType:Camera.PictureSourceType.SAVEDPHOTOALBUM,allowEdit:!0,encodingType:Camera.EncodingType.JPEG,targetWidth:800,targetHeight:800,popoverOptions:CameraPopoverOptions,saveToPhotoAlbum:!0}).then(function(t){e.profileImage.data="data:image/jpeg;base64,"+t})},e.chooseDate=function(){var t=new Date("01/01/1960"),o=new Date;o.setTime(o.valueOf()-31536e7),ionic.Platform.isAndroid()&&(o=o.valueOf(),t=t.valueOf()),i.show({date:e.profileEdit.data.birth_date,minDate:t,maxDate:o,doneButtonLabel:"אישור",okText:"אישור",doneButtonColor:"#00B763",cancelButtonLabel:"ביטול",cancelText:"ביטול"}).then(function(t){e.profileEdit.data.birth_date=t})};var d=function(e,t){var o=r.alert({title:e,template:t,okText:"המשך",okType:"button-balanced"});return o},u=function(e){return"function"==typeof e.getMonth?e.getUTCFullYear()+"-"+f(e.getUTCMonth()+1)+"-"+f(e.getUTCDate())+"T"+f(e.getUTCHours())+":"+f(e.getUTCMinutes())+":"+f(e.getUTCSeconds())+"Z":e},f=function(e){return 10>e?"0"+e:e};e.submit=function(o){angular.isUndefined(o)&&(imageUpload=!1),o?(e.profileEdit.data.birth_date=u(e.profileEdit.data.birth_date),t.editUserProfile(e.profileEdit.data).then(function(){a.hide(),n.go("employees.profile")},function(e){a.hide(),d("אירעה שגיאה","אירעה שגיאה בתקשורת עם המערכת")})):(a.show(),e.profileEdit.form.$valid&&(e.profileImage.data!=e.profileImage.original?t.uploadImage(e.profileImage.data).then(function(t){e.profileEdit.data.profile_image_uri=t,e.submit(!0)},function(){d("אירעה שגיאה","אירעה שגיאה בתקשורת עם המערכת")}):e.submit(!0)))}}angular.module("jobhop.controllers").controller("UserProfileEditController",UserProfileEditController),UserProfileEditController.$inject=["$scope","JobHopAPI","$cordovaCamera","$cordovaDatePicker","$ionicLoading","$ionicPopup","$state"];
angular.module("jobhop.directives",[]);
function fileReader(e){var r=Array.prototype.slice;return{restrict:"A",require:"?ngModel",link:function(n,l,i,t){t&&(t.$render=function(){},l.bind("change",function(n){function l(r){var n=e.defer(),l=new FileReader;return l.onload=function(e){n.resolve(e.target.result)},l.onerror=function(e){n.reject(e)},l.readAsDataURL(r),n.promise}var i=n.target;i.value&&(i.disabled=!0,e.all(r.call(i.files,0).map(l)).then(function(e){t.$setViewValue(i.multiple?e:e.length?e[0]:null),i.value=null,i.disabled=!1}))}))}}}angular.module("jobhop.directives").directive("fileReader",fileReader),fileReader.$inject=["$q"];
function hideTabs(){return{restrict:"A",link:function(i,e,t){i.$root.hideTabs="tabs-item-hide",i.$on("$destroy",function(){i.$root.hideTabs=""})}}}angular.module("jobhop.directives").directive("hideTabs",hideTabs),hideTabs.$inject=[];
function jobBlock(){return{restrict:"E",scope:{job:"=",link:"=",employer:"=",employee:"="},templateUrl:"views/employees/job-template.html",link:function(e,o,l){}}}angular.module("jobhop.directives").directive("jobBlock",jobBlock),jobBlock.$inject=[];
angular.module("jobhop.filters",[]);
function cut(){return function(t,r,u,n){if(!t)return"";if(u=parseInt(u,10),!u)return t;if(t.length<=u)return t;if(t=t.substr(0,u),r){var e=t.lastIndexOf(" ");-1!=e&&(t=t.substr(0,e))}return t+(n||" …")}}angular.module("jobhop.filters").filter("cut",cut),cut.$inject=[];
function JobHopAPI(e,r,s,o,a,t,n){var u={},i=function(){for(var e=32,r="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",s="",o=e;o>0;--o)s+=r[Math.round(Math.random()*(r.length-1))];return s},p=function(){var e=new Date(s.user.profile.birth_date),r=Date.now()-e.getTime(),o=new Date(r);s.user.profile.age=Math.abs(o.getUTCFullYear()-1970)};return u.uploadImage=function(e){var r=t.defer(),s="-------314159265358979323846",o="\r\n--"+s+"\r\n",a="\r\n--"+s+"--",u=e.split(",")[0].split(":")[1].split(";")[0],p=e.split(",")[1],l="user/images/",g={name:l+i(),mimeType:u},f=o+"Content-Type: application/json\r\n\r\n"+angular.toJson(g)+o+"Content-Type: "+u+"\r\nContent-Transfer-Encoding: base64\r\n\r\n"+p+a,c="v1",_="jobhopapp.appspot.com",b=n.gapi.client.request({path:"/upload/storage/"+c+"/b/"+_+"/o",method:"POST",params:{uploadType:"multipart"},headers:{"Content-Type":'multipart/mixed; boundary="'+s+'"'},body:f});return b.execute(function(e){r.resolve("https://storage.googleapis.com/jobhopapp.appspot.com/"+e.name)},function(){r.reject()}),r.promise},u.uploadVideo=function(e){var r="user/videos/"+i(),o="https://www.googleapis.com/",t="storage/v1",n="jobhopapp.appspot.com",u="upload/"+t+"/b/"+n+"/o?uploadType=media&name="+r;return a.upload(o+u,e.fullPath,{mimeType:e.type,fileName:r,headers:{"Accept-Encoding":"gzip","Content-Type":e.type,"Content-Length":e.size}}).then(function(e){var r="https://storage.googleapis.com/jobhopapp.appspot.com/"+angular.fromJson(e.response).name;return s.user.profile.profile_video_uri=r,r})},u.getCurrentUserProfile=function(){var r={base_message:s.user.baseMessage};return e.execute("jobhopApi","user.get_current_user_profile",r).then(function(e){return delete e.result,e})},u.getCurrentUserProfileKey=function(){var r={base_message:s.user.baseMessage};return e.execute("jobhopApi","user.get_current_user_profile_key",r)},u.createUserProfile=function(r){var o={base_message:s.user.baseMessage};return angular.extend(o,r),e.execute("jobhopApi","user.create_user_profile",o).then(function(e){delete e.result,s.user.profile=r,s.user.profile.id=e.urlsafe_key,p()})},u.editUserProfile=function(r){var o={base_message:s.user.baseMessage,user_message:r,user_urlsafe_key:r.id};return e.execute("jobhopApi","user.update_user",o).then(function(){s.user.profile=r,s.user.profile.id=r.id,p()})},u.login=function(r,o,a){var t={auth_type:r,identifier:o.identifier,secret:o.secret},n=e.execute("jobhopApi","signin.sign_in",t);return n.then(!angular.isUndefined(a)&&a?function(e){s.user.baseMessage={auth_type:r,auth_id:e.auth_id,token:e.token}}:function(e){return s.user.baseMessage={auth_type:r,auth_id:e.auth_id,token:e.token},angular.isUndefined(e.complete_user_message)?!1:u.getCurrentUserProfile().then(function(e){return u.getCurrentUserProfileKey().then(function(r){return s.user.profile=e,s.user.profile.id=r.urlsafe_key,s.user.logged=!0,p(),!0},function(e){return s.user.baseMessage={},e})},function(e){return s.user.baseMessage={},e})})},u.register=function(e,r){var o=({auth_type:e,identifier:r.identifier,secret:r.secret},{});return angular.extend(o,r),u.createUserProfile(o).then(function(){s.user.logged=!0,s.user=s.user})},u.logout=function(){return s.user={profile:{},baseMessage:{},logged:!1},o.logout()},u.getFeed=function(o,a,t){var n={njobs:r,fetch_type:"GENERAL",filter_message:{}};return!angular.isUndefined(t)&&t&&(n.fetch_type="ACCOUNT_EMPLOYMENT"),!angular.isUndefined(o)&&o&&(n.curs=o),!angular.isUndefined(a)&&a&&(n.filter_message=a),s.user.logged&&(n.base_message=s.user.baseMessage),e.execute("jobhopApi","feed.fetch",n).then(function(e){var r={nextCurs:e.next_curs,jobs:[]};return angular.forEach(e.feed_entries,function(e,s){var o=e.urlsafe_key;e.id=o,delete o,delete e.urlsafe_key,r.jobs.push(e)}),r})},u.getJob=function(r){var o={urlsafe_key:r};return s.user.logged&&(o.base_message=s.user.baseMessage),e.execute("jobhopApi","job.get_complete_job",o).then(function(e){var r=e.complete_employer_message,s=e,o={};o.id=r.employer_urlsafe_key,angular.extend(o,r.employer_message);var a={};a.id=s.job_urlsafe_key,angular.extend(a,s.job_message),angular.forEach([{label:"משמרות",value:"SHIFTS"},{label:"משרה חלקית",value:"PART_TIME"},{label:"משרה מלאה",value:"FULL_TIME"}],function(e){e.value==a.type&&(a.type=e.label)});var t={};return angular.isUndefined(s.employee_message)||(t.id=s.employee_message.employment_urlsafe_key,t.status=s.employee_message.status),{employer:o,job:a,employee:t}})},u.getEmployer=function(r){var o={urlsafe_key:r};return s.user.logged&&(o.base_message=s.user.baseMessage),e.execute("jobhopApi","employer.get_complete_employer",o).then(function(e){var r={};return r.id=e.employer_urlsafe_key,angular.extend(r,e.employer_message),r})},u.getEmployment=function(r){var o={urlsafe_key:r};return s.user.logged&&(o.base_message=s.user.baseMessage),e.execute("jobhopApi","employee.get_employee",o).then(function(e){var r={id:e.urlsafe_key,statu:e.status};return r})},u.applyJob=function(r){var o={urlsafe_key:r};return s.user.logged&&(o.base_message=s.user.baseMessage),e.execute("jobhopApi","job.apply_to_job",o)},u.applyJobWithVideo=function(r,o){var a={job_key:r,video_message:{type:"PROFILE_VIDEO"}};return angular.isUndefined(o)||(a.video_message={type:"NEW_VIDEO",uri:o}),s.user.logged&&(a.base_message=s.user.baseMessage),e.execute("jobhopApi","job.apply_to_job_with_video",a)},u.finalApplyJob=function(r){var o={urlsafe_key:r};return s.user.logged&&(o.base_message=s.user.baseMessage),e.execute("jobhopApi","job.final_approve_job",o)},u.resignFromJob=function(r){var o={urlsafe_key:r};return s.user.logged&&(o.base_message=s.user.baseMessage),e.execute("jobhopApi","job.resign_from_job",o)},u.cancelApplicationJob=function(r){var o={urlsafe_key:r};return s.user.logged&&(o.base_message=s.user.baseMessage),e.execute("jobhopApi","job.cancel_application",o)},u.likeJob=function(r){var o={urlsafe_key:r};return s.user.logged&&(o.base_message=s.user.baseMessage),e.execute("jobhopApi","job.add_to_my_jobs",o)},u.dislikeJob=function(r){var o={urlsafe_key:r};return s.user.logged&&(o.base_message=s.user.baseMessage),e.execute("jobhopApi","job.remove_from_my_jobs",o)},u}angular.module("jobhop.services").factory("JobHopAPI",JobHopAPI).constant("JobsPerPage",15),JobHopAPI.$inject=["GApi","JobsPerPage","$localStorage","$cordovaFacebook","$cordovaFileTransfer","$q","$window"];
angular.module("jobhop.services",[]);